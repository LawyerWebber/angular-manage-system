!function(){"use strict";angular.module("app.helper",["ui.router","angular-loading-bar","ngAnimate","ngCookies"])}(),function(){"use strict";angular.module("app.core",["app.helper"])}(),function(){"use strict";angular.module("app.home",["app.core"])}(),function(){"use strict";angular.module("app.layout",["app.core"])}(),function(){"use strict";angular.module("app.login",["app.core"])}(),function(){"use strict";angular.module("app",["app.core","app.helper","app.home","app.layout","app.login"])}(),function(){"use strict";function t(t,e,r,n){window.localStorage.setItem("user",angular.toJson({name:"school"}));var o=angular.fromJson(localStorage.getItem("user"));o?t.user={username:o.name,type:0}:window.location.href="http://rap.xdbigdata.com/app-store/#/login",t.clearPending=function(){angular.forEach(n.pendingRequests,function(t){t.cancel&&t.timeout&&t.cancel.resolve("canceled")})},t.$on("$stateChangeStart",function(e,r,n,o,u){t.clearPending(),t.alert=!1}),t.isActive,t.alertValue="",t.alert=!1}angular.module("app").run(t),t.$inject=["$rootScope","$cookies","$state","$http"]}(),function(){"use strict";function t(t,e,r){return{postHttp:function(n,o){var u=e.defer();return o?t({method:"post",url:r+n,data:o,timeout:u.promise,cancel:u}).success(function(t){u.resolve(t)}).error(function(t){u.reject(t)}):t({method:"post",url:r+n,timeout:u.promise,cancel:u,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){u.resolve(t)}).error(function(t){u.reject(t)}),u.promise},put:function(n,o){var u=e.defer();return t({method:"put",url:r+n,data:o,timeout:u.promise,cancel:u}).success(function(t){u.resolve(t)}).error(function(t){u.reject(t)}),u.promise},post:function(n,o){var u=e.defer();return t.post(r+n+"/"+o,{timeout:u.promise,cancel:u}).success(function(t){u.resolve(t)}).error(function(t){u.reject(t)}),u.promise},get:function(n,o){var u=e.defer();return t.get(r+n+(o?"/"+o:""),{timeout:u.promise,cancel:u}).success(function(t){u.resolve(t)}).error(function(t){u.reject(t)}),u.promise},delete:function(n,o){var u=e.defer();return t.delete(r+n+"/"+o,{timeout:u.promise,cancel:u}).success(function(t){u.resolve(t)}).error(function(t){u.reject(t)}),u.promise}}}angular.module("app.core").factory("httpServer",t),t.$inject=["$http","$q","ROOT"]}(),function(){"use strict";function t(t){var e={};return e.login=function(e){return t.postHttp("/user/login",e)},e.logout=function(){return t.postHttp("/user/logout")},e}angular.module("app.core").factory("userSerivce",t),t.$inject=["httpServer"]}(),function(){"use strict";function t(t,e,r,n,o,u){return{request:function(t){return t},response:function(r){return r.data.status===!1&&(70005===r.data.code&&70005===r.data.code?(n.alertError("登录过期，正在跳转到登录界面"),o(function(){u.remove("user"),t.user=u.getObject("user"),localStorage.clear(),window.location.href=e.$$absUrl.split("#")[0]+"#/login"},2e3)):n.alertError(r.data.message)),r},requestError:function(t){return console.log("requestError"+r.reject(t)),r.reject(t)},responseError:function(t){return 500===t.status&&n.alertError("服务器异常！！！"),t}}}angular.module("app.helper").factory("postInterceptor",t),t.$inject=["$rootScope","$location","$q","tools","$timeout","$cookies"]}(),function(){"use strict";function t(t,e,r){function n(n,o){function u(r,n){r.forEach(function(e){t.state(e.state,e.config)}),n&&!i&&(i=!0,e.otherwise(n))}function a(){return o.get()}r.interceptors.push("postInterceptor");var i=!1;return{configureStates:u,getStates:a}}this.$get=n,n.$inject=["$rootScope","$state"]}angular.module("app.helper").provider("routerHelper",t),t.$inject=["$stateProvider","$urlRouterProvider","$httpProvider"]}(),function(){"use strict";function t(t,e){this.alertSuccess=function(r,n){e.alert=!0,e.isActive=!0,t(function(){e.alert=!1},n?n:2e3),e.alertValue=r},this.alertError=function(r,n){e.alert=!0,e.isActive=!1,t(function(){e.alert=!1},n?n:2e3),e.alertValue=r},this.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},this.formatArr=function(t,e){return t.map(function(t){return null==t||"NaN"===t?0:null==e?t:t*e})},this.formatStr=function(t,e,r){var n="",o=0;if(t){for(var u=0,a=t.length;u<a;u++)o%e==0&&0!==o?n=n+r+t.charAt(u):n+=t.charAt(u),o++;return n}return t},this.max=function(t){if(angular.isArray(t))return t.length>0?Math.max.apply(null,t):0;console.log(t+"is not a array")},this.min=function(t){if(angular.isArray(t))return t.length>0?Math.min.apply(null,t):0;console.log(t+"is not a array")}}angular.module("app.helper").service("tools",t),t.$inject=["$timeout","$rootScope"]}(),function(){"use strict";function t(t,e,r){r.alertSuccess("success")}angular.module("app.home").controller("homeCtrl",t),t.$inject=["$state","$rootScope","tools"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"main.home",config:{url:"/home",views:{"section@main":{templateUrl:"dist/tpls/home/home.html",controller:"homeCtrl as vm"}}}}]}angular.module("app.home").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t,e){this.state=t}angular.module("app.layout").controller("asideCtrl",t),t.$inject=["$state","$rootScope"]}(),function(){"use strict";function t(t,e){}angular.module("app.layout").controller("headerCtrl",t),t.$inject=["$state","$rootScope"]}(),function(){"use strict";function t(t){t.configureStates(e(),"/main")}function e(){return[{state:"main",config:{url:"/main",views:{"":{templateUrl:"dist/tpls/layout/main.html"},"header@main":{templateUrl:"dist/tpls/layout/header.html",controller:"headerCtrl as vm"},"aside@main":{templateUrl:"dist/tpls/layout/aside.html",controller:"asideCtrl as vm"},"section@main":{controller:["$state",function(t){t.go("main.home")}]}}}},{state:"404",config:{url:"/404",templateUrl:"404.html"}}]}angular.module("app.layout").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t,e,r){t.user&&e.go("main");var n=this;n.submit=!1,n.user={},n.login=function(){n.submit=!0,n.loginForm.$valid&&(e.go("main"),r.login(n.user).then(function(){}))}}angular.module("app.login").controller("loginCtrl",t),t.$inject=["$rootScope","$state","userSerivce"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"login",config:{url:"/login",templateUrl:"dist/tpls/login/login.html",controller:"loginCtrl as vm"}}]}angular.module("app.login").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";angular.module("app.core").constant("ROOT","")}();